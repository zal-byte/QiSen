DROP TABLE IF EXISTS siswa;
DROP TABLE IF EXISTS absen;
DROP TABLE IF EXISTS informasi_gambar;
DROP TABLE IF EXISTS guru;
DROP TABLE IF EXISTS admin;


CREATE TABLE siswa (
NIS CHAR(10) NOT NULL PRIMARY KEY,
Nama VARCHAR(50) NOT NULL,
Tanggal_lahir DATE NOT NULL,
Tempat_lahir VARCHAR(100) NOT NULL,
Alamat TEXT NOT NULL,
Jenis_kelamin ENUM ("l","p") NOT NULL,
Agama VARCHAR(50) NOT NULL,
Kelas VARCHAR(10) NOT NULL,
Foto TEXT NOT NULL,
Password VARCHAR(50) NOT NULL);

CREATE TABLE absen (
No_absen INT AUTO_INCREMENT NOT NULL PRIMARY KEY,
NIS CHAR(10) NOT NULL,
NIK CHAR(16) NOT NULL,
Tanggal_absen DATE NOT NULL,
Jam_absen TIME NOT NULL,
Kelas_absen VARCHAR(10) NOT NULL,
Info_gambar VARCHAR(50) NOT NULL);

CREATE TABLE informasi_gambar (
Info_gambar VARCHAR(50) NOT NULL,
Tanggal_info DATE NOT NULL,
Jam_info TIME NOT NULL,
Lokasi_info TEXT,
Path TEXT NOT NULL);

CREATE TABLE guru (
NIK CHAR(16) NOT NULL PRIMARY KEY,
Nama VARCHAR(50) NOT NULL,
Tanggal_lahir DATE NOT NULL,
Tempat_lahir VARCHAR(50) NOT NULL,
Alamat TEXT NOT NULL,
Jenis_kelamin ENUM ("l","p") NOT NULL,
Agama VARCHAR(50) NOT NULL,
Foto TEXT NOT NULL,
Password VARCHAR(50) NOT NULL);

CREATE TABLE admin (
NIK CHAR(16) NOT NULL PRIMARY KEY,
Nama VARCHAR(50) NOT NULL,
Tanggal_lahir DATE NOT NULL,
Tempat_lahir VARCHAR(50) NOT NULL,
Alamat TEXT NOT NULL,
Jenis_kelamin ENUM ("l","p") NOT NULL,
Agama VARCHAR(50) NOT NULL,
Foto TEXT NOT NULL,
Password VARCHAR(50) NOT NULL);

ALTER TABLE absen ADD CONSTRAINT absen_NIS_siswa_NIS FOREIGN KEY (NIS) REFERENCES siswa(NIS);
ALTER TABLE absen ADD CONSTRAINT absen_NIK_guru_NIK FOREIGN KEY (NIK) REFERENCES guru(NIK);
